<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMSSS Assessment Workflow - Pure JS</title>

    <script src="https://cdn.tailwindcss.com"></script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        /* Base styles */
        body {
            font-family: ui-sans-serif, system-ui, sans-serif;
            background-color: #f8f9fa; /* Light background */
            min-height: 100vh;
        }
        .custom-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 4px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background-color: #f1f5f9;
        }
    </style>
</head>
<body>

    <div id="root" class="p-4 md:p-8"></div>

    <script>
        const { useState, useEffect, useMemo, useCallback } = React;

        // Custom Hook to load Lucide Icons globally
        const useLucideIcons = () => {
            useEffect(() => {
                if (window.lucide) {
                    window.lucide.createIcons();
                }
            }, []);
        };

        // Helper function for React.createElement
        const e = React.createElement;

        // --- NEW COMPONENT: Terms of Service (STEP 1) ---
        const TermsOfService = ({ onAccept }) => {
            const [isAccepted, setIsAccepted] = useState(false);
            
            return e('div', { className: "space-y-6 p-6" },
                e('h2', { className: "text-2xl font-semibold text-gray-800 border-b pb-3 mb-4" }, "Step 1: Accept Terms of Service"),
                
                e('div', { className: "bg-gray-100 p-4 rounded-lg h-60 overflow-y-scroll border border-gray-300" },
                    e('p', { className: "text-sm text-gray-700" }, 
                        e('h3', { className: "font-bold mb-2" }, "IMSSS Assessor Terms and Conditions"),
                        "1. **Data Confidentiality:** All assessment data collected through this tool is highly confidential and must be treated according to your organization's security policy. Do not share raw assessment results without proper authorization.",
                        e('br'), e('br'),
                        "2. **Tool Ownership:** This tool is the intellectual property of your organization. Unauthorized distribution, modification, or reverse engineering is strictly prohibited.",
                        e('br'), e('br'),
                        "3. **Purpose:** This tool is intended solely for internal risk assessment and maturity scoring (IMSSS). It is not a guarantee of security compliance.",
                        e('br'), e('br'),
                        "4. **User Responsibility:** You are responsible for the accuracy of the data entered. Misrepresentation of security posture may lead to incorrect risk modeling.",
                        e('br'), e('br'),
                        "By proceeding, you acknowledge these terms."
                    )
                ),
                
                e('div', { className: "flex items-center mt-4" },
                    e('input', {
                        type: 'checkbox',
                        id: 'acceptTerms',
                        checked: isAccepted,
                        onChange: (e) => setIsAccepted(e.target.checked),
                        className: 'h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500'
                    }),
                    e('label', { htmlFor: 'acceptTerms', className: 'ml-2 block text-sm text-gray-900' }, "I have read and agree to the Terms of Service.")
                ),

                e('div', { className: "flex justify-end pt-4" },
                    e('button', {
                        onClick: onAccept,
                        disabled: !isAccepted,
                        className: `
                            px-6 py-2 text-white font-medium rounded-lg transition duration-150
                            ${isAccepted 
                                ? 'bg-indigo-600 hover:bg-indigo-700' 
                                : 'bg-gray-400 cursor-not-allowed'
                            }
                        `
                    }, "Proceed to Assessment Setup")
                )
            );
        };

        // --- STEP 2 COMPONENT (Previously Step 1) ---
        const
