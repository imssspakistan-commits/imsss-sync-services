<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMSSS AI Synchronization Services</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        indigo: {
                            50: '#eef2ff',
                            600: '#4f46e5',
                            700: '#4338ca',
                            800: '#3730a3',
                        },
                        blue: {
                            600: '#2563eb',
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-50 min-h-screen">
    
    <div id="root"></div>

    <script id="main-react-code" type="text/template">
        const { useState, useMemo, useEffect } = React;
        // This is safe now because the Lucide CDN has already loaded globally.
        const { Shield, TrendingUp, Zap, Clock, UserCheck, ScrollText, AlertTriangle, CheckCircle, Package, Briefcase, Award, Globe, User, History } = lucide;

        // --- CONFIGURATION DATA ---
        const RISK_QUESTIONS = [
          { id: 1, text: "Does your AI system manage, evaluate, or select candidates for employment, career advancement, or task allocation?", category: "HR & Labor" },
          { id: 2, text: "Is your system used for evaluating the creditworthiness or establishing collateral for loans, insurance, or other vital public/private services?", category: "Access to Services" },
          { id: 3, text: "Is your system intended for use in the administration of justice (e.g., influencing legal rulings or providing evidence)?", category: "E-Justice" },
          { id: 4, text: "Is your system used for real-time remote biometric identification (e.g., facial recognition in public spaces)?", category: "Law Enforcement" },
          { id: 5, text: "Is your system used to evaluate or influence the outcome of elections or referenda?", category: "Democracy" },
        ];

        const MATURITY_CHECK_QUESTIONS = [
          { id: 101, text: "Do you have formal, documented procedures for identifying and mitigating risks of bias (e.g., gender, ethnicity) in your training data?", requirement: "Data Governance" },
          { id: 102, text: "Is there a clear, documented mechanism for a human to review and overturn critical decisions made by the AI system?", requirement: "Human Oversight" },
          { id: 103, text: "Do you provide end-users with clear, technical documentation on the systemâ€™s purpose, accuracy, and operational limitations?", requirement: "Transparency & Documentation" },
          { id: 104, text: "Are all changes to the AI model's code, data, and configuration tracked in a detailed audit log/system?", requirement: "Record Keeping" },
          { id: 105, text: "Is a senior manager formally designated and responsible for the overall compliance of the AI system (AI Management System ownership)?", requirement: "Governance" },
        ];
        
        const COLOR_MAP = {
            red: { bgColor: 'bg-red-50', textColor: 'text-red-600' },
            indigo: { bgColor: 'bg-indigo-50', textColor: 'text-indigo-600' },
            blue: { bgColor: 'bg-blue-50', textColor: 'text-blue-600' },
        };

        const StepHeader = ({ icon: Icon, title, description, color = 'blue' }) => {
            const { bgColor, textColor } = COLOR_MAP[color] || COLOR_MAP['blue'];

            return (
                <div className={`flex items-start space-x-4 mb-6 p-4 ${bgColor} rounded-xl`}>
                    <Icon className={`w-8 h-8 ${textColor} mt-1 flex-shrink-0`} />
                    <div>
                        <h2 className="text-xl font-bold text-gray-800">{title}</h2>
                        <p className="text-sm text-gray-500">{description}</p>
                    </div>
                </div>
            );
        };

        const Button = ({ children, onClick, primary = true, disabled = false, className = '', ...props }) => {
            const baseClasses = `px-6 py-3 rounded-xl font-semibold transition duration-300 transform active:scale-95 shadow-lg ${className}`;
            const colorClasses = primary
                ? 'bg-gradient-to-r from-blue-600 to-indigo-700 text-white hover:from-blue-700 hover:to-indigo-800'
                : 'bg-gray-200 text-gray-700 hover:bg-gray-300';
            const disabledClasses = disabled ? 'opacity-50 cursor-not-allowed' : '';
            
            if (props.href) {
                return (
                    <a
                        href={props.href}
                        className={`${baseClasses} ${colorClasses} ${disabledClasses} inline-block text-center`}
                        {...props}
                    >
                        {children}
                    </a>
                );
            }

            return (
                <button
                    onClick={onClick}
                    disabled={disabled}
                    className={`${baseClasses} ${colorClasses} ${disabledClasses}`}
                    {...props}
                >
                    {children}
                </button>
            );
        };

        // --- ASSESSOR LOGIC ---

        const AssessorContainer = () => {
            const [step, setStep] = useState(1);
            const [riskAnswers, setRiskAnswers] = useState(RISK_QUESTIONS.reduce((acc, q) => ({ ...acc, [q.id]: false }), {}));
            const [maturityAnswers, setMaturityAnswers] = useState(MATURITY_CHECK_QUESTIONS.reduce((acc, q) => ({ ...acc, [q.id]: false }), {}));
            const [systemName, setSystemName] = useState('');

            const isHighRisk = useMemo(() => RISK_QUESTIONS.some(q => riskAnswers[q.id]), [riskAnswers]);
            
            const highRiskScore = useMemo(() => {
                const answeredCount = MATURITY_CHECK_QUESTIONS.length;
                const compliantCount = MATURITY_CHECK_QUESTIONS.filter(q => maturityAnswers[q.id]).length;
                return Math.round((compliantCount / answeredCount) * 100);
            }, [maturityAnswers]);

            const handleNext = () => setStep(prev => prev + 1);
            const handleBack = () => setStep(prev => prev - 1);

            const handleRiskChange = (id) => setRiskAnswers(prev => ({ ...prev, [id]: !prev[id] }));
            const handleMaturityChange = (id) => setMaturityAnswers(prev => ({ ...prev, [id]: !prev[id] }));

            const onReset = () => {
                setStep(1);
                setRiskAnswers(RISK_QUESTIONS.reduce((acc, q) => ({ ...acc, [q.id]: false }), {}));
                setMaturityAnswers(MATURITY_CHECK_QUESTIONS.reduce((acc, q) => ({ ...acc, [q.id]: false }), {}));
                setSystemName('');
            };


            if (step === 4) {
                return (
                    <Report 
                        systemName={systemName} 
                        highRiskScore={highRiskScore} 
                        isHighRisk={isHighRisk}
                        onReset={onReset}
                    />
                );
            }

            const renderStep = () => {
                switch (step) {
                    case 1:
                        return (
                            <>
                                <StepHeader
                                    icon={Package}
                                    title="Step 1/3: System Identification"
                                    description="Name your AI system to personalize the risk report."
                                />
                                <input
                                    type="text"
                                    value={systemName}
                                    onChange={(e) => setSystemName(e.target.value)}
                                    placeholder="e.g., TalentMatch Recruiting AI"
                                    className="w-full p-3 border border-gray-300 rounded-xl shadow-inner focus:ring-blue-500 focus:border-blue-500 transition"
                                />
                                <div className="mt-8 flex justify-end">
                                    <Button onClick={handleNext} disabled={!systemName.trim()}>
                                        Next: Assess Risk <span aria-hidden="true">&rarr;</span>
                                    </Button>
                                </div>
                            </>
                        );

                    case 2:
                        return (
                            <>
                                <StepHeader
                                    icon={AlertTriangle}
                                    title="Step 2/3: EU AI Act Risk Classification"
                                    description="Answer YES if your system is used in any of these critical, high-risk areas (Annex III)."
                                    color="red"
                                />
                                <div className="space-y-4">
                                    {RISK_QUESTIONS.map(q => (
                                        <div key={q.id} className="p-4 border border-gray-200 rounded-xl bg-white shadow-sm hover:shadow-md">
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={riskAnswers[q.id]}
                                                    onChange={() => handleRiskChange(q.id)}
                                                    className="form-checkbox h-5 w-5 text-red-600 rounded focus:ring-red-500"
                                                />
                                                <span className="text-gray-800 font-medium">{q.text}</span>
                                            </label>
                                            <p className="text-xs text-gray-500 mt-1 ml-8 italic">Category: {q.category}</p>
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-8 flex justify-between">
                                    <Button onClick={handleBack} primary={false}>&larr; Back</Button>
                                    <Button onClick={handleNext}>Next: Maturity Check &rarr;</Button>
                                </div>
                            </>
                        );

                    case 3:
                        return (
                            <>
                                <StepHeader
                                    icon={Shield}
                                    title="Step 3/3: Synchronization Maturity Check (ISO 42001)"
                                    description="Answer YES only if you have robust, documented processes in place for these core requirements."
                                    color="indigo"
                                />
                                {isHighRisk && (
                                        <div className="mb-6 p-4 bg-red-100 border-l-4 border-red-500 text-red-700 rounded-lg shadow-inner">
                                            <p className="font-bold">Urgent:</p>
                                            <p className="text-sm">Since your system is **High-Risk**, a 'NO' answer indicates a critical failure point under the EU AI Act.</p>
                                        </div>
                                )}
                                <div className="space-y-4">
                                    {MATURITY_CHECK_QUESTIONS.map(q => (
                                        <div key={q.id} className="p-4 border border-gray-200 rounded-xl bg-white shadow-sm hover:shadow-md">
                                            <label className="flex items-center space-x-3 cursor-pointer">
                                                <input
                                                    type="checkbox"
                                                    checked={maturityAnswers[q.id]}
                                                    onChange={() => handleMaturityChange(q.id)}
                                                    className="form-checkbox h-5 w-5 text-indigo-600 rounded focus:ring-indigo-500"
                                                />
                                                <span className="text-gray-800 font-medium">{q.text}</span>
                                            </label>
                                            <p className="text-xs text-gray-500 mt-1 ml-8 italic">Requirement: {q.requirement}</p>
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-8 flex justify-between">
                                    <Button onClick={handleBack} primary={false}>&larr; Back</Button>
                                    <Button onClick={() => setStep(4)}>View Final Report &rarr;</Button>
                                </div>
                            </>
                        );

                    default: return null;
                }
            };

            return (
                <div className="p-6 bg-white rounded-2xl shadow-xl border border-gray-100">
                    {/* Progress Bar */}
                    <div className="mb-6">
                        <div className="w-full bg-gray-200 rounded-full h-2.5 mt-1">
                            <div
                                className="bg-blue-600 h-2.5 rounded-full transition-all duration-500"
                                style={{ width: `${(step / 3) * 100}%` }}
                            ></div>
                        </div>
                    </div>
                    {renderStep()}
                </div>
            );
        };

        // --- REPORT COMPONENT ---

        const Report = ({ systemName, highRiskScore, isHighRisk, onReset }) => {
            const scoreColor = highRiskScore >= 80 ? 'text-green-600' : highRiskScore >= 50 ? 'text-yellow-600' : 'text-red-600';
            const riskColor = isHighRisk ? 'bg-red-50 text-red-700 border-red-500' : 'bg-green-50 text-green-700 border-green-500';
            const riskIcon = isHighRisk ? <AlertTriangle className="w-5 h-5 mr-2" /> : <CheckCircle className="w-5 h-5 mr-2" />;

            const riskLevel = isHighRisk ? 'High-Risk' : 'Minimal/Limited Risk';

            const advice = useMemo(() => {
                if (isHighRisk) {
                    if (highRiskScore < 50) return { title: "CRITICAL FAILURE POINT", content: "Your AI system is classified as High-Risk but lacks basic governance in over 50% of critical areas. Immediate compliance action is required to avoid EU market exclusion and severe financial penalties (up to â‚¬35M)." };
                    if (highRiskScore < 80) return { title: "SIGNIFICANT GAPS DETECTED", content: "You are not ready for a Conformity Assessment and require structured remediation to meet the EU AI Act mandates." };
                    return { title: "AUDIT READINESS (BETA)", content: "Your system demonstrates high compliance maturity. Minor adjustments and the final IMSSS AIMS Manual implementation are needed before seeking formal certification." };
                }
                return { title: "LOW RISK, HIGH TRUST OPPORTUNITY", content: "Your system is Minimal Risk. Achieving ISO 42001 certification voluntarily will still increase customer trust and future-proof your product." };
            }, [isHighRisk, highRiskScore]);

            return (
                <div className="space-y-6">
                    <StepHeader
                        icon={ScrollText}
                        title="Synchronization Readiness Report"
                        description={`Results for the AI System: ${systemName}`}
                    />

                    {/* Risk Classification Panel */}
                    <div className={`p-5 rounded-xl shadow-lg border-l-4 ${riskColor}`}>
                        <h3 className="font-bold text-lg flex items-center mb-2">
                            <Zap className="w-5 h-5 mr-2" />
                            EU AI Act Risk Classification
                        </h3>
                        <div className="mt-3 inline-flex items-center px-4 py-2 font-semibold text-white rounded-full shadow-md" style={{ backgroundColor: isHighRisk ? '#dc2626' : '#10b981' }}>
                            {riskIcon}
                            {riskLevel}
                        </div>
                    </div>

                    {/* Maturity Score Panel */}
                    <div className="p-5 rounded-xl shadow-lg border border-gray-200 bg-white">
                        <h3 className="font-bold text-lg flex items-center mb-2 text-gray-800">
                            <Clock className="w-5 h-5 mr-2 text-blue-600" />
                            IMSSS Synchronization Maturity Score
                        </h3>
                        <div className="flex items-center justify-between">
                            <p className="text-sm text-gray-600">Compliance Readiness against ISO/IEC 42001 & EU AI Act.</p>
                            <div className={`text-4xl font-extrabold ${scoreColor} p-2 rounded-lg`}>
                                {highRiskScore}%
                            </div>
                        </div>

                        <div className="mt-4 w-full bg-gray-200 rounded-full h-3">
                            <div
                                className={`h-3 rounded-full transition-all duration-700 ${highRiskScore >= 80 ? 'bg-green-500' : highRiskScore >= 50 ? 'bg-yellow-500' : 'bg-red-500'}`}
                                style={{ width: `${highRiskScore}%` }}
                            ></div>
                        </div>
                    </div>

                    {/* Strategic Advice Panel */}
                    <div className={`p-5 rounded-xl shadow-lg border-l-4 border-indigo-500 bg-indigo-50`}>
                        <h3 className="font-bold text-lg flex items-center mb-2 text-indigo-700">
                            <UserCheck className="w-5 h-5 mr-2" />
                            Strategic Recommendation
                        </h3>
                        <p className="text-md font-semibold text-indigo-800 mb-2">{advice.title}</p>
                        <p className="text-sm text-indigo-700">{advice.content}</p>

                        <div className="mt-4 pt-4 border-t border-indigo-200">
                            <h4 className="text-sm font-bold mb-2">Your Next Step: IMSSS Assessment</h4>
                            <p className="text-sm text-indigo-700 font-bold">The IMSSS Synchronization Readiness Assessment (PKR 1.2M) provides the full AIMS Manual and the roadmap to 100% compliance. Contact us below to schedule your briefing.</p>
                        </div>
                    </div>

                    <div className="mt-8 flex justify-center">
                        <Button onClick={onReset} primary={false}>
                            <span aria-hidden="true">â†º</span> Start New Assessment
                        </Button>
                    </div>
                </div>
            );
        };

        // --- MAIN PAGE LAYOUT ---
        const MainApp = () => (
            <div className="container mx-auto p-4 sm:p-8">
                {/* Header Section */}
                <header className="text-center py-8 bg-white rounded-xl shadow-lg mb-8">
                    <h1 className="text-4xl sm:text-5xl font-extrabold text-gray-900 leading-tight">
                        IMSSS AI Synchronization Services
                    </h1>
                    <p className="mt-2 text-xl font-medium text-indigo-600">
                        ISO 42001 & EU AI Act Compliance
                    </p>
                </header>

                {/* Hero / High-Impact Headline Section */}
                <section className="bg-indigo-700 text-white p-6 sm:p-10 rounded-2xl shadow-2xl mb-12">
                    <h2 className="text-3xl sm:text-4xl font-bold mb-4">
                        ðŸš¨ PKR 1.2M: Guaranteed Avoidance of â‚¬35 Million EU AI Fines for High-Risk Systems.
                    </h2>
                    <p className="text-lg font-light">
                        The EU AI Act is mandatory. We provide the synchronization framework to ensure your system achieves global certification readiness (ISO 42001) and secures your European market access.
                    </p>
                    <div className="mt-6 text-center">
                        <Button 
                            href="#assessor" 
                            className="w-full sm:w-auto text-lg" 
                            primary={false} 
                            style={{ backgroundColor: 'white', color: '#4f46e5' }}
                        >
                            Start Your Free Risk Check Now &darr;
                        </Button>
                    </div>
                </section>

                {/* Free Assessor Section (Primary CTA) */}
                <section id="assessor" className="mb-12 pt-8">
                    <AssessorContainer />
                </section>

                {/* Footer Section */}
                <footer className="text-center py-6 text-gray-500 text-sm border-t mt-12">
                    Â© 2025 IMSSS Synchronization Services.
                </footer>
            </div>
        );
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // A. Get the raw JSX code from the template block
                const codeBlock = document.getElementById('main-react-code');
                if (!codeBlock) {
                    console.error("Error: main-react-code script block not found.");
                    return;
                }
                const code = codeBlock.textContent;

                // B. Use Babel to transform the JSX into executable JavaScript
                // We use presets: ['react'] to handle the JSX syntax.
                const compiledCode = Babel.transform(code, { 
                    presets: ['react'] 
                }).code;

                // C. Execute the compiled code in the global scope
                // This defines the MainApp function and all other components globally.
                eval(compiledCode);
                
                // D. Manually mount the React App
                const rootElement = document.getElementById('root');
                if (rootElement && typeof MainApp !== 'undefined') {
                    ReactDOM.createRoot(rootElement).render(React.createElement(MainApp));
                    console.log("IMSSS App successfully compiled and rendered!");
                } else {
                    console.error("Root element not found or MainApp component not defined.");
                }
            } catch (error) {
                console.error("An error occurred during Babel compilation or React rendering:", error);
            }
        });
    </script>
</body>
</html>
